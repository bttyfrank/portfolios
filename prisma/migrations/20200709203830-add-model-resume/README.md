# Migration `20200709203830-add-model-resume`

This migration has been generated by Frank Huang at 7/9/2020, 8:38:30 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Resume" (
"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"id" SERIAL,"updatedAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"userId" integer  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."Heading" (
"id" SERIAL,"name" text  NOT NULL ,"resumeId" integer  NOT NULL ,"section" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."Profile" (
"email" text  NOT NULL ,"fullName" text  NOT NULL ,"id" SERIAL,"link" text  NOT NULL ,"location" text  NOT NULL ,"phone" text  NOT NULL ,"resumeId" integer  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."School" (
"degree" text  NOT NULL ,"endDate" timestamp(3)  NOT NULL ,"gpa" Decimal(65,30)  NOT NULL ,"id" SERIAL,"location" text  NOT NULL ,"major" text  NOT NULL ,"name" text  NOT NULL ,"resumeId" integer  NOT NULL ,"startDate" timestamp(3)  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."Job" (
"companyName" text  NOT NULL ,"endDate" timestamp(3)  NOT NULL ,"id" SERIAL,"location" text  NOT NULL ,"responsibilities" text []  ,"resumeId" integer  NOT NULL ,"startDate" timestamp(3)  NOT NULL ,"title" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."Skill" (
"details" text []  ,"id" SERIAL,"name" text  NOT NULL ,"resumeId" integer  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."Project" (
"desc" text  NOT NULL ,"id" SERIAL,"link" text  NOT NULL ,"name" text  NOT NULL ,"resumeId" integer  NOT NULL ,"tools" text []  ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."Award" (
"awarder" text  NOT NULL ,"date" timestamp(3)  NOT NULL ,"id" SERIAL,"name" text  NOT NULL ,"resumeId" integer  NOT NULL ,"summary" text []  ,
    PRIMARY KEY ("id"))

CREATE UNIQUE INDEX "Resume_userId" ON "public"."Resume"("userId")

CREATE UNIQUE INDEX "Profile_resumeId" ON "public"."Profile"("resumeId")

ALTER TABLE "public"."Resume" ADD FOREIGN KEY ("userId")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."Heading" ADD FOREIGN KEY ("resumeId")REFERENCES "public"."Resume"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."Profile" ADD FOREIGN KEY ("resumeId")REFERENCES "public"."Resume"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."School" ADD FOREIGN KEY ("resumeId")REFERENCES "public"."Resume"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."Job" ADD FOREIGN KEY ("resumeId")REFERENCES "public"."Resume"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."Skill" ADD FOREIGN KEY ("resumeId")REFERENCES "public"."Resume"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."Project" ADD FOREIGN KEY ("resumeId")REFERENCES "public"."Resume"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."Award" ADD FOREIGN KEY ("resumeId")REFERENCES "public"."Resume"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200709005239-init..20200709203830-add-model-resume
--- datamodel.dml
+++ datamodel.dml
@@ -3,14 +3,14 @@
 }
 // datasource db {
 //   provider = "sqlite"
-//   url = "***"
+//   url = "***"
 // }
 datasource db {
   provider = "postgres"
-  url = "***"
+  url = "***"
 }
 model User {
   id        Int      @default(autoincrement()) @id
@@ -20,8 +20,9 @@
   fullName  String
   email     String   @unique
   password  String
   todos     Todo[]
+  resume    Resume?
 }
 model Todo {
   id        Int      @default(autoincrement()) @id
@@ -32,4 +33,91 @@
   completed Boolean  @default(false)
   user      User?    @relation(fields: [userId], references: [id])
   userId    Int?
 }
+
+model Resume {
+  id        Int       @default(autoincrement()) @id
+  user      User      @relation(fields: [userId], references: [id])
+  userId    Int
+  createdAt DateTime  @default(now())
+  updatedAt DateTime  @default(now())
+  profile   Profile?
+  schools   School[]
+  job       Job[]
+  skills    Skill[]
+  projects  Project[]
+  awards    Award[]
+  headings  Heading[]
+}
+
+model Heading {
+  id       Int    @default(autoincrement()) @id
+  resume   Resume @relation(fields: [resumeId], references: [id])
+  resumeId Int
+  name     String
+  section  String
+}
+
+model Profile {
+  id       Int    @default(autoincrement()) @id
+  resume   Resume @relation(fields: [resumeId], references: [id])
+  resumeId Int
+  fullName String
+  email    String
+  phone    String
+  location String
+  link     String
+}
+
+model School {
+  id        Int      @default(autoincrement()) @id
+  resume    Resume   @relation(fields: [resumeId], references: [id])
+  resumeId  Int
+  name      String
+  location  String
+  degree    String
+  major     String
+  gpa       Float
+  startDate DateTime
+  endDate   DateTime
+}
+
+model Job {
+  id               Int      @default(autoincrement()) @id
+  resume           Resume   @relation(fields: [resumeId], references: [id])
+  resumeId         Int
+  companyName      String
+  title            String
+  location         String
+  startDate        DateTime
+  endDate          DateTime
+  responsibilities String[]
+}
+
+model Skill {
+  id       Int      @default(autoincrement()) @id
+  resume   Resume   @relation(fields: [resumeId], references: [id])
+  resumeId Int
+  name     String
+  details  String[]
+}
+
+model Project {
+  id       Int      @default(autoincrement()) @id
+  resume   Resume   @relation(fields: [resumeId], references: [id])
+  resumeId Int
+  name     String
+  desc     String
+  link     String
+  tools    String[]
+}
+
+model Award {
+  id       Int      @default(autoincrement()) @id
+  resume   Resume   @relation(fields: [resumeId], references: [id])
+  resumeId Int
+  name     String
+  date     DateTime
+  awarder  String
+  summary  String[]
+}
```


